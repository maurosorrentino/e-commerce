{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport Fuse from 'fuse.js';\nimport Link from 'next/link';\nimport SearchStyle from '../components/styles/SearchStyle';\n\nvar Search = /*#__PURE__*/function (_Component) {\n  _inherits(Search, _Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", function () {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/api/shop\"), {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          items: resData.items\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        input: e.target.value\n      });\n    });\n\n    _this.state = {\n      items: [],\n      input: ''\n    };\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // here I handle the search bar with fuse\n      var fuse = new Fuse(this.state.items, {\n        // I only want the title to be found\n        keys: ['title']\n      }); // here we tell fuse to search the input of the user\n\n      var results = fuse.search(this.state.input); // mapping the results that match and returning a <li> with the link of the item\n\n      var itemsResults = results.map(function (result) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: result.item._id\n        }, /*#__PURE__*/React.createElement(Link, {\n          href: \"/view-item/\".concat(result.item._id)\n        }, result.item.title));\n      });\n      return /*#__PURE__*/React.createElement(SearchStyle, null, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"search\",\n        value: this.state.input\n      }), /*#__PURE__*/React.createElement(\"ul\", null, itemsResults));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nvar _default = Search;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Search, \"Search\", \"/Users/stefano.mezza/e-commerce/frontend/components/Search.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/e-commerce/frontend/components/Search.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/e-commerce/frontend/components/Search.js"],"names":["React","Component","Fuse","Link","SearchStyle","Search","props","fetch","process","env","NEXT_PUBLIC_API_URL","method","headers","then","res","json","resData","setState","items","err","console","log","e","preventDefault","input","target","value","state","fetchData","bind","fuse","keys","results","search","itemsResults","map","result","item","_id","title","handleChange"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAOC,WAAP,MAAwB,kCAAxB;;IAEMC,M;;;;;AAEF,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,gEAcP,YAAM;AAEdC,MAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,mBAAhB,gBAAgD;AAEjDC,QAAAA,MAAM,EAAE,KAFyC;AAIjDC,QAAAA,OAAO,EAAE;AAEL,0BAAgB,kBAFX;AAGL,oBAAU;AAHL;AAJwC,OAAhD,CAAL,CAaCC,IAbD,CAaM,UAAAC,GAAG,EAAI;AAET,eAAOA,GAAG,CAACC,IAAJ,EAAP;AAEH,OAjBD,EAmBCF,IAnBD,CAmBM,UAAAG,OAAO,EAAI;AAEb,cAAKC,QAAL,CAAc;AAAEC,UAAAA,KAAK,EAAEF,OAAO,CAACE;AAAjB,SAAd;AAEH,OAvBD,WAyBO,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OAzBV;AA2BH,KA3CkB;;AAAA,mEA6CJ,UAAAG,CAAC,EAAI;AAEhBA,MAAAA,CAAC,CAACC,cAAF;;AAEA,YAAKN,QAAL,CAAc;AAAEO,QAAAA,KAAK,EAAEF,CAAC,CAACG,MAAF,CAASC;AAAlB,OAAd;AAEH,KAnDkB;;AAGf,UAAKC,KAAL,GAAa;AAETT,MAAAA,KAAK,EAAE,EAFE;AAGTM,MAAAA,KAAK,EAAE;AAHE,KAAb;AAOA,UAAKI,SAAL,GAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB;AAVe;AAYlB;;;;WAyCD,6BAAoB;AAEhB,WAAKD,SAAL;AAEH;;;WAED,kBAAS;AAEL;AACA,UAAME,IAAI,GAAG,IAAI5B,IAAJ,CAAS,KAAKyB,KAAL,CAAWT,KAApB,EAA2B;AAEpC;AACAa,QAAAA,IAAI,EAAE,CAEF,OAFE;AAH8B,OAA3B,CAAb,CAHK,CAcL;;AACA,UAAMC,OAAO,GAAGF,IAAI,CAACG,MAAL,CAAY,KAAKN,KAAL,CAAWH,KAAvB,CAAhB,CAfK,CAiBL;;AACA,UAAMU,YAAY,GAAGF,OAAO,CAACG,GAAR,CAAY,UAAAC,MAAM,EAAI;AAEvC,4BAAO;AAAI,UAAA,GAAG,EAAEA,MAAM,CAACC,IAAP,CAAYC;AAArB,wBAA0B,oBAAC,IAAD;AAAM,UAAA,IAAI,uBAAgBF,MAAM,CAACC,IAAP,CAAYC,GAA5B;AAAV,WAA8CF,MAAM,CAACC,IAAP,CAAYE,KAA1D,CAA1B,CAAP;AAEH,OAJoB,CAArB;AAMA,0BAEI,oBAAC,WAAD,qBAEI;AAAO,QAAA,QAAQ,EAAE,KAAKC,YAAtB;AAAoC,QAAA,IAAI,EAAC,MAAzC;AAAgD,QAAA,WAAW,EAAC,QAA5D;AAAqE,QAAA,KAAK,EAAE,KAAKb,KAAL,CAAWH;AAAvF,QAFJ,eAII,gCAEKU,YAFL,CAJJ,CAFJ;AAgBH;;;;;;;;;;;EArGgBjC,S;;eAyGNI,M;AAAf;;;;;;;;;;0BAzGMA,M","sourcesContent":["import React, { Component } from 'react';\nimport Fuse from 'fuse.js';\nimport Link from 'next/link';\n\nimport SearchStyle from '../components/styles/SearchStyle';\n\nclass Search extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n\n            items: [],\n            input: '',\n    \n        }\n\n        this.fetchData = this.fetchData.bind(this);\n\n    }\n\n    fetchData = () => {\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/shop`, {\n\n            method: 'GET',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            }\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ items: resData.items });\n\n        })\n\n        .catch(err => console.log(err));\n\n    };\n\n    handleChange = e => {\n\n        e.preventDefault();\n\n        this.setState({ input: e.target.value });\n\n    }\n\n    componentDidMount() {\n\n        this.fetchData();\n\n    };\n\n    render() {\n\n        // here I handle the search bar with fuse\n        const fuse = new Fuse(this.state.items, {\n\n            // I only want the title to be found\n            keys: [\n\n                'title',\n\n            ]\n\n        });\n\n        // here we tell fuse to search the input of the user\n        const results = fuse.search(this.state.input);\n        \n        // mapping the results that match and returning a <li> with the link of the item\n        const itemsResults = results.map(result => {\n\n            return <li key={result.item._id}><Link href={`/view-item/${result.item._id}`}>{result.item.title}</Link></li>\n\n        })\n\n        return (\n\n            <SearchStyle>\n\n                <input onChange={this.handleChange} type=\"text\" placeholder=\"search\" value={this.state.input} />   \n\n                <ul>\n\n                    {itemsResults}\n\n                </ul>\n\n            </SearchStyle>\n\n        )\n\n    }\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}