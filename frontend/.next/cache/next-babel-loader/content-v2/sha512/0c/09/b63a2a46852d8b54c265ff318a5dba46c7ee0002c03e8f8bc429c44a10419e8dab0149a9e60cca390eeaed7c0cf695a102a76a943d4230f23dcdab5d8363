{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport Form from './styles/Form';\nimport MessageStyles from './styles/MessageStyles';\nimport Header from '../components/Header';\n\nvar VerifyAccount = /*#__PURE__*/function (_Component) {\n  _inherits(VerifyAccount, _Component);\n\n  var _super = _createSuper(VerifyAccount);\n\n  function VerifyAccount() {\n    var _this;\n\n    _classCallCheck(this, VerifyAccount);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      loading: false,\n      message: null,\n      password: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState({\n        password: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        laoding: true\n      });\n\n      var userId = _this.props.userId;\n      var tokenVerifyEmail = _this.props.tokenVerifyEmail;\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/verify-account/\").concat(encodeURIComponent(tokenVerifyEmail), \"/\").concat(userId), {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          password: _this.state.password\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          message: resData.message,\n          loading: false\n        });\n      }).then(function () {\n        if (_this.state.message === 'Sorry, Something Went wrong. Please Signup Again') {\n          setTimeout(function () {\n            window.location.replace('/auth/signup');\n          }, 2000);\n        }\n\n        if (_this.state.message === 'Thank You For Verifying Your Account.') {\n          setTimeout(function () {}, 200);\n        }\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(VerifyAccount, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, null), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === 'Sorry, Something Went wrong. Please Signup Again' || this.state.message === 'Passwords Do Not Match' ? 'red' : ''\n      }, this.state.message)), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.fetchData\n      }, /*#__PURE__*/React.createElement(\"fieldset\", {\n        \"aria-busy\": this.state.loading,\n        disabled: this.state.loading\n      }, /*#__PURE__*/React.createElement(\"h1\", null, \"Verify\", this.state.loading ? 'ing' : '', \" Your Account\"), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"password\"\n      }, \"Password\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        onChange: this.handleChange,\n        value: this.state.password,\n        className: this.state.message === 'Passwords Do Not Match' ? 'invalid' : '',\n        placeholder: \"please enter your password\"\n      })), /*#__PURE__*/React.createElement(\"button\", null, \"Verify\", this.state.loading ? 'ing' : '', \" Your Account\"))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return VerifyAccount;\n}(Component);\n\nvar _default = VerifyAccount;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(VerifyAccount, \"VerifyAccount\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/VerifyAccount.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/VerifyAccount.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/VerifyAccount.js"],"names":["React","Component","Form","MessageStyles","Header","VerifyAccount","loading","message","password","e","setState","target","value","preventDefault","laoding","userId","props","tokenVerifyEmail","fetch","process","env","NEXT_PUBLIC_API_URL","encodeURIComponent","method","headers","credentials","body","JSON","stringify","state","then","res","json","resData","setTimeout","window","location","replace","err","console","log","fetchData","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Form from './styles/Form';\nimport MessageStyles from './styles/MessageStyles';\nimport Header from '../components/Header';\n\nclass VerifyAccount extends Component {\n\n    state = {\n\n        loading: false,\n        message: null,\n        password: '',\n\n    }\n\n    handleChange = e => {\n\n        this.setState({ password: e.target.value });\n\n    }\n\n    fetchData = e => {\n\n        e.preventDefault();\n\n        this.setState({ laoding: true });\n\n        const userId = this.props.userId;\n        const tokenVerifyEmail = this.props.tokenVerifyEmail;\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/verify-account/${encodeURIComponent(tokenVerifyEmail)}/${userId}`, {\n\n            method: 'PATCH',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n            body: JSON.stringify({\n\n                password: this.state.password,\n\n            })\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ message: resData.message, loading: false });\n\n        })\n\n        .then(() => {\n\n            if(this.state.message === 'Sorry, Something Went wrong. Please Signup Again') {\n\n                setTimeout(() => {\n\n                    window.location.replace('/auth/signup');\n                    \n                }, 2000);\n\n            }\n\n            if(this.state.message === 'Thank You For Verifying Your Account.') {\n\n                setTimeout(() => { }, 200)\n\n            }\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n    render() {\n\n        return (\n<>\n            <Header />\n\n            { this.state.message && (<MessageStyles><h1 className={\n\n                this.state.message === 'Sorry, Something Went wrong. Please Signup Again' || this.state.message === 'Passwords Do Not Match' ? 'red' : ''\n\n            }>{this.state.message}</h1></MessageStyles>)}\n\n            <Form onSubmit={this.fetchData}>\n\n                <fieldset aria-busy={this.state.loading} disabled={this.state.loading}>\n\n                    <h1>Verify{this.state.loading ? 'ing' : ''} Your Account</h1>\n\n                    <label htmlFor=\"password\">\n\n                        Password\n\n                        <input\n\n                            name=\"password\"\n                            type=\"password\"\n                            onChange={this.handleChange}\n                            value={this.state.password}\n                            className={this.state.message === 'Passwords Do Not Match' ? 'invalid' : ''}\n                            placeholder=\"please enter your password\"\n\n                        />\n\n                    </label>\n\n                    <button>Verify{this.state.loading ? 'ing' : ''} Your Account</button>\n\n                </fieldset>\n\n            </Form>\n</>\n        )\n\n    }\n\n}\n\nexport default VerifyAccount;"]},"metadata":{},"sourceType":"module"}