{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport Form from './styles/Form';\nimport MessageStyles from './styles/MessageStyles';\nimport Header from './Header';\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputs\", function (e) {\n      var _this$setState;\n\n      /* messaage: null so that we can keep the class of the message red on change */\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, e.target.name, e.target.value), _defineProperty(_this$setState, \"message\", null), _this$setState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loginHandler\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      _this.fetchData();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", function () {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/login\"), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          email: _this.state.email,\n          password: _this.state.password\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          message: resData.message,\n          loading: false\n        }); // we only want to show the user one of these 3 messages\n\n\n        if (resData.message !== 'invalid password, please try again' && resData.message !== \"There is no account into our database with this email: \".concat(_this.state.email) && resData.message !== 'Successful Login, You Are Being Redirected To Our Shop' && resData.message !== 'Please Verify Your Account') {\n          _this.setState({\n            message: null\n          });\n        }\n\n        ;\n\n        if (_this.state.email === '') {\n          _this.setState({\n            message: null\n          });\n        }\n\n        ; // redirecting to the shop page at successful login\n\n        if (resData.message === 'Successful Login, You Are Being Redirected To Our Shop') {\n          setTimeout(function () {\n            window.location.replace('/');\n          }, 2000);\n        }\n      })[\"catch\"](function (err) {\n        _this.setState({\n          loading: false\n        });\n\n        console.log(err);\n      });\n    });\n\n    _this.state = {\n      email: '',\n      password: '',\n      message: null,\n      loading: false\n    };\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, null), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === \"There is no account into our database with this email: \".concat(this.state.email) || this.state.message === 'invalid password, please try again' || this.state.message === 'Please Verify Your Account' ? 'red' : '',\n        id: \"message-test\"\n      }, this.state.message)), /*#__PURE__*/React.createElement(Form, {\n        id: \"login-form-test\",\n        onSubmit: this.loginHandler\n      }, /*#__PURE__*/React.createElement(\"fieldset\", {\n        \"aria-busy\": this.state.loading,\n        disabled: this.state.loading\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        id: \"h1-test\"\n      }, \"Log\", this.state.loading ? 'ging' : '', \" In\"), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"email\"\n      }, \"Email\", /*#__PURE__*/React.createElement(\"input\", {\n        id: \"email-test\",\n        name: \"email\",\n        type: \"email\",\n        placeholder: \"enter your email\",\n        value: this.state.email,\n        onChange: this.handleInputs,\n        className: this.state.message === \"There is no account into our database with this email: \".concat(this.state.email) ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"password\"\n      }, \"Password\", /*#__PURE__*/React.createElement(\"input\", {\n        id: \"password-test\",\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"enter your password\",\n        value: this.state.password,\n        onChange: this.handleInputs,\n        className: this.state.message === 'invalid password, please try again' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        id: \"button-test\"\n      }, \"Log\", this.state.loading ? 'ging' : '', \" in!\"), /*#__PURE__*/React.createElement(Link, {\n        href: \"/reset-password\"\n      }, /*#__PURE__*/React.createElement(\"button\", null, \"Reset Password\")))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar _default = Login;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Login, \"Login\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Login.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Login.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Login.js"],"names":["React","Component","Link","Form","MessageStyles","Header","Login","props","e","setState","target","name","value","preventDefault","loading","fetchData","fetch","process","env","NEXT_PUBLIC_API_URL","method","headers","credentials","body","JSON","stringify","email","state","password","then","res","json","resData","message","setTimeout","window","location","replace","err","console","log","bind","loginHandler","handleInputs"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\n\nimport Form from './styles/Form';\nimport MessageStyles from './styles/MessageStyles';\nimport Header from './Header';\n\nclass Login extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n\n            email: '',\n            password: '',\n            message: null,\n            loading: false,\n            \n        }\n\n        this.fetchData = this.fetchData.bind(this);\n\n    }\n\n    handleInputs = e => {\n\n        /* messaage: null so that we can keep the class of the message red on change */\n        this.setState({ [e.target.name]: e.target.value, message: null });\n\n    }\n\n    loginHandler = e => {\n\n        e.preventDefault();\n\n        this.setState({ loading: true });\n        this.fetchData();\n\n    }\n\n    fetchData = () => {\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/login`, {\n\n            method: 'POST',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: \"include\",\n\n            body: JSON.stringify({\n\n                email: this.state.email,\n                password: this.state.password,\n\n            }),\n\n        })\n\n        .then(res => { \n\n            return res.json();\n\n        })\n\n        .then(resData => { \n\n            this.setState({ message: resData.message, loading: false });\n\n            // we only want to show the user one of these 3 messages\n            if(resData.message !== 'invalid password, please try again' && resData.message !== `There is no account into our database with this email: ${this.state.email}` \n            && resData.message !== 'Successful Login, You Are Being Redirected To Our Shop' && resData.message !== 'Please Verify Your Account') {\n\n                this.setState({ message: null });\n\n            };\n\n            if(this.state.email === '') {\n\n                this.setState({ message: null });\n\n            };\n\n            // redirecting to the shop page at successful login\n            if(resData.message === 'Successful Login, You Are Being Redirected To Our Shop') {\n\n                setTimeout(() => {\n\n                    window.location.replace('/');\n                    \n                }, 2000);\n\n            }\n\n        })\n\n        .catch(err => {\n\n            this.setState({ loading: false });\n            console.log(err);\n\n        })\n\n    }\n\n    render() {\n\n        return (\n<>\n            <Header />\n\n            { this.state.message && (<MessageStyles><h1 className={\n                \n                this.state.message === `There is no account into our database with this email: ${this.state.email}` \n                || this.state.message === 'invalid password, please try again' || this.state.message === 'Please Verify Your Account'\n                \n        ? 'red' : ''} \n        \n        id=\"message-test\">{this.state.message}</h1></MessageStyles> ) }\n\n            <Form id=\"login-form-test\" onSubmit={this.loginHandler}>\n\n                <fieldset aria-busy={this.state.loading} disabled={this.state.loading}>\n\n                    <h1 id=\"h1-test\">Log{this.state.loading ? 'ging' : ''} In</h1>\n\n                    <label htmlFor=\"email\">\n\n                        Email\n\n                        <input\n\n                            id=\"email-test\"\n                            name=\"email\"\n                            type=\"email\"\n                            placeholder=\"enter your email\"\n                            value={this.state.email}\n                            onChange={this.handleInputs}\n                            className={this.state.message === `There is no account into our database with this email: ${this.state.email}` ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"password\">\n\n                        Password\n\n                        <input\n\n                            id=\"password-test\"\n                            name=\"password\"\n                            type=\"password\"\n                            placeholder=\"enter your password\"\n                            value={this.state.password}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'invalid password, please try again' ? 'invalid': '' }\n\n                        />\n\n                    </label>\n\n                    <button id=\"button-test\">Log{this.state.loading ? 'ging' : ''} in!</button>\n\n                    <Link href=\"/reset-password\"><button>Reset Password</button></Link>\n\n                </fieldset>\n\n            </Form>\n</>\n        )\n\n    }\n\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}