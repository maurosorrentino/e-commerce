{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { FaStar } from 'react-icons/fa';\nimport ReviewStatsStyle from './styles/ReviewStatsStyle';\nimport WriteReview from '../components/WriteReview';\n\nvar ReviewStats = /*#__PURE__*/function (_Component) {\n  _inherits(ReviewStats, _Component);\n\n  var _super = _createSuper(ReviewStats);\n\n  function ReviewStats(props) {\n    var _this;\n\n    _classCallCheck(this, ReviewStats);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/review-stats/\").concat(itemId), {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          totalReviews: resData.totalReviews,\n          averageReviews: resData.averageReviews.toFixed(2),\n          total5stars: resData.total5starsLength,\n          total4stars: resData.total4starsLength,\n          total3stars: resData.total3starsLength,\n          total2stars: resData.total2starsLength,\n          total1star: resData.total1starLength\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _this.state = {\n      totalReviews: 0,\n      averageReviews: 0,\n      total5stars: 0,\n      total4stars: 0,\n      total3stars: 0,\n      total2stars: 0,\n      total1star: 0\n    };\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ReviewStats, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      /* calculating the % of the reviews so that we can \"animate\" the width of the div and show the user a color bar with the % of the reviews */\n      var widthBar5 = this.state.total5stars / this.state.totalReviews * 100;\n      var widthBar4 = this.state.total4stars / this.state.totalReviews * 100;\n      var widthBar3 = this.state.total3stars / this.state.totalReviews * 100;\n      var widthBar2 = this.state.total2stars / this.state.totalReviews * 100;\n      var widthBar1 = this.state.total1star / this.state.totalReviews * 100;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ReviewStatsStyle, null, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"user-rating\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"heading\"\n      }, \"user rating\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.averageReviews >= 1 ? 'checked' : ''\n      }, /*#__PURE__*/React.createElement(FaStar, null)), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.averageReviews >= 2 ? 'checked' : ''\n      }, /*#__PURE__*/React.createElement(FaStar, null)), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.averageReviews >= 3 ? 'checked' : ''\n      }, /*#__PURE__*/React.createElement(FaStar, null)), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.averageReviews >= 4 ? 'checked' : ''\n      }, /*#__PURE__*/React.createElement(FaStar, null)), /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.averageReviews >= 5 ? 'checked' : ''\n      }, /*#__PURE__*/React.createElement(FaStar, null)), /*#__PURE__*/React.createElement(\"p\", null, this.state.averageReviews, \" average based on \", this.state.totalReviews, \" review\", this.state.totalReviews.length > 1 ? 's' : '')), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stars\"\n      }, \"5 stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"middle\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"bar-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: this.state.total5stars === 0 ? {\n          width: '0%'\n        } : {\n          width: \"\".concat(widthBar5, \"%\")\n        },\n        \"class\": \"bar-5\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side right\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"total-reviews\"\n      }, this.state.total5stars)), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stars\"\n      }, \"4 stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"middle\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"bar-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: this.state.total4stars === 0 ? {\n          width: '0%'\n        } : {\n          width: \"\".concat(widthBar4, \"%\")\n        },\n        \"class\": \"bar-4\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side right\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"total-reviews\"\n      }, this.state.total4stars)), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stars\"\n      }, \"3 stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"middle\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"bar-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: this.state.total3stars === 0 ? {\n          width: '0%'\n        } : {\n          width: \"\".concat(widthBar3, \"%\")\n        },\n        \"class\": \"bar-3\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side right\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"total-reviews\"\n      }, this.state.total3stars)), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stars\"\n      }, \"2 stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"middle\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"bar-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: this.state.total2stars === 0 ? {\n          width: '0%'\n        } : {\n          width: \"\".concat(widthBar2, \"%\")\n        },\n        \"class\": \"bar-2\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"side right\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"total-reviews\"\n      }, this.state.total2stars)), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"side-middle-margin-bottom\",\n        \"class\": \"side\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stars\"\n      }, \"1 star\")), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"side-middle-margin-bottom\",\n        \"class\": \"middle\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"class\": \"bar-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: this.state.total1star === 0 ? {\n          width: '0%'\n        } : {\n          width: \"\".concat(widthBar1, \"%\")\n        },\n        \"class\": \"bar-1\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"side-middle-margin-bottom\",\n        \"class\": \"side right\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"total-reviews\"\n      }, this.state.total1star)), /*#__PURE__*/React.createElement(WriteReview, {\n        userId: this.props.userId,\n        itemId: this.props.itemId\n      })));\n    }\n  }]);\n\n  return ReviewStats;\n}(Component);\n\nexport default ReviewStats;","map":null,"metadata":{},"sourceType":"module"}