{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport Header from '../components/Header';\nimport StyleOfItem from '../components/styles/StyleOfItem';\nimport LoadingStyle from '../components/styles/LoadingStyle';\nimport AddToCart from '../components/AddToCart';\nimport ReviewStats from '../components/ReviewStats';\nimport ItemAvailableAgain from '../components/ItemAvailableAgain';\nimport ViewItemStyle from '../components/styles/ViewItemStyle';\n\nvar ViewItem = /*#__PURE__*/function (_Component) {\n  _inherits(ViewItem, _Component);\n\n  var _super = _createSuper(ViewItem);\n\n  function ViewItem(props) {\n    var _this;\n\n    _classCallCheck(this, ViewItem);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchDataLoggedIn\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"http://localhost:8090/view-item-in/\".concat(itemId), {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: 'include'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          loading: false,\n          title: resData.title,\n          price: resData.price,\n          description: resData.description,\n          image: resData.image,\n          inStock: resData.stock,\n          itemId: resData.itemId,\n          userId: resData.userId\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchDataLoggedOut\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"\".concat(process.env.LOCALHOST, \"/view-item-out/\").concat(itemId), {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          loading: false,\n          title: resData.title,\n          price: resData.price,\n          description: resData.description,\n          image: resData.image,\n          inStock: resData.stock,\n          itemId: resData.itemId\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _this.state = {\n      loading: true,\n      title: '',\n      description: '',\n      image: '',\n      price: undefined,\n      inStock: undefined,\n      itemId: undefined,\n      userId: null\n    };\n    _this.fetchDataLoggedIn = _this.fetchDataLoggedIn.bind(_assertThisInitialized(_this));\n    _this.fetchDataLoggedOut = _this.fetchDataLoggedOut.bind(_assertThisInitialized(_this));\n    return _this;\n  } // there are 2 middleware for showing the reviews because in the one where the user is logged in I send the userId so that we have a way to show the user the button \"remove review\"\n  // if the review shown it's his\n\n\n  _createClass(ViewItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      cookie.load('authCookie') && this.fetchDataLoggedIn();\n      !cookie.load('authCookie') && this.fetchDataLoggedOut();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      cookie.load('authCookie') && this.fetchDataLoggedIn();\n      !cookie.load('authCookie') && this.fetchDataLoggedOut();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, null), this.state.loading && /*#__PURE__*/React.createElement(LoadingStyle, null, \"Loading...\"), !this.state.loading && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ViewItemStyle, null, /*#__PURE__*/React.createElement(StyleOfItem, null, /*#__PURE__*/React.createElement(\"h1\", null, \"title\"), /*#__PURE__*/React.createElement(\"p\", null, this.state.title), /*#__PURE__*/React.createElement(\"img\", {\n        alt: this.state.title,\n        src: this.state.image\n      }), /*#__PURE__*/React.createElement(\"h1\", null, \"description\"), /*#__PURE__*/React.createElement(\"p\", null, this.state.description), /*#__PURE__*/React.createElement(\"h1\", null, \"price\"), /*#__PURE__*/React.createElement(\"p\", null, Number(this.state.price).toFixed(2), \" \\u20AC\"), /*#__PURE__*/React.createElement(AddToCart, {\n        inStock: this.state.inStock,\n        itemId: this.props.itemId\n      }), this.state.inStock <= 5 && this.state.inStock > 0 && /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"few-left\"\n      }, \"only \", this.state.inStock, \" left!!!\"), this.state.inStock === 0 && /*#__PURE__*/React.createElement(ItemAvailableAgain, {\n        itemId: this.state.itemId\n      }))), /*#__PURE__*/React.createElement(ReviewStats, {\n        userId: this.state.userId,\n        itemId: this.props.itemId\n      })));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return ViewItem;\n}(Component);\n\nvar _default = ViewItem;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ViewItem, \"ViewItem\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ViewItem.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ViewItem.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ViewItem.js"],"names":["React","Component","cookie","Header","StyleOfItem","LoadingStyle","AddToCart","ReviewStats","ItemAvailableAgain","ViewItemStyle","ViewItem","props","itemId","fetch","method","headers","credentials","then","res","json","resData","setState","loading","title","price","description","image","inStock","stock","userId","err","console","log","process","env","LOCALHOST","state","undefined","fetchDataLoggedIn","bind","fetchDataLoggedOut","load","Number","toFixed"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,OAAOC,YAAP,MAAyB,mCAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,kBAAP,MAA+B,kCAA/B;AACA,OAAOC,aAAP,MAA0B,oCAA1B;;IAEMC,Q;;;;;AAEF,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,wEAuBC,YAAM;AAEtB,UAAMC,MAAM,GAAG,MAAKD,KAAL,CAAWC,MAA1B;AAEAC,MAAAA,KAAK,8CAAuCD,MAAvC,GAAiD;AAElDE,QAAAA,MAAM,EAAE,KAF0C;AAIlDC,QAAAA,OAAO,EAAE;AAEL,0BAAgB,kBAFX;AAGL,oBAAU;AAHL,SAJyC;AAWlDC,QAAAA,WAAW,EAAE;AAXqC,OAAjD,CAAL,CAeCC,IAfD,CAeM,UAAAC,GAAG,EAAI;AAET,eAAOA,GAAG,CAACC,IAAJ,EAAP;AAEH,OAnBD,EAqBCF,IArBD,CAqBM,UAAAG,OAAO,EAAI;AAEb,cAAKC,QAAL,CAAc;AAAEC,UAAAA,OAAO,EAAE,KAAX;AAAkBC,UAAAA,KAAK,EAAEH,OAAO,CAACG,KAAjC;AAAwCC,UAAAA,KAAK,EAAEJ,OAAO,CAACI,KAAvD;AACVC,UAAAA,WAAW,EAAEL,OAAO,CAACK,WADX;AACwBC,UAAAA,KAAK,EAAEN,OAAO,CAACM,KADvC;AAC8CC,UAAAA,OAAO,EAAEP,OAAO,CAACQ,KAD/D;AACsEhB,UAAAA,MAAM,EAAEQ,OAAO,CAACR,MADtF;AAC8FiB,UAAAA,MAAM,EAAET,OAAO,CAACS;AAD9G,SAAd;AAGH,OA1BD,WA4BO,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OA5BV;AA8BH,KAzDkB;;AAAA,yEA2DE,YAAM;AAEvB,UAAMlB,MAAM,GAAG,MAAKD,KAAL,CAAWC,MAA1B;AAEAC,MAAAA,KAAK,WAAIoB,OAAO,CAACC,GAAR,CAAYC,SAAhB,4BAA2CvB,MAA3C,GAAqD;AAEtDE,QAAAA,MAAM,EAAE,KAF8C;AAItDC,QAAAA,OAAO,EAAE;AAEL,0BAAgB,kBAFX;AAGL,oBAAU;AAHL;AAJ6C,OAArD,CAAL,CAaCE,IAbD,CAaM,UAAAC,GAAG,EAAI;AAET,eAAOA,GAAG,CAACC,IAAJ,EAAP;AAEH,OAjBD,EAmBCF,IAnBD,CAmBM,UAAAG,OAAO,EAAI;AAEb,cAAKC,QAAL,CAAc;AAAEC,UAAAA,OAAO,EAAE,KAAX;AAAkBC,UAAAA,KAAK,EAAEH,OAAO,CAACG,KAAjC;AAAwCC,UAAAA,KAAK,EAAEJ,OAAO,CAACI,KAAvD;AACVC,UAAAA,WAAW,EAAEL,OAAO,CAACK,WADX;AACwBC,UAAAA,KAAK,EAAEN,OAAO,CAACM,KADvC;AAC8CC,UAAAA,OAAO,EAAEP,OAAO,CAACQ,KAD/D;AACsEhB,UAAAA,MAAM,EAAEQ,OAAO,CAACR;AADtF,SAAd;AAGH,OAxBD,WA0BO,UAAAkB,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OA1BV;AA4BH,KA3FkB;;AAGf,UAAKM,KAAL,GAAa;AAETd,MAAAA,OAAO,EAAE,IAFA;AAGTC,MAAAA,KAAK,EAAE,EAHE;AAITE,MAAAA,WAAW,EAAE,EAJJ;AAKTC,MAAAA,KAAK,EAAE,EALE;AAMTF,MAAAA,KAAK,EAAEa,SANE;AAOTV,MAAAA,OAAO,EAAEU,SAPA;AAQTzB,MAAAA,MAAM,EAAEyB,SARC;AASTR,MAAAA,MAAM,EAAE;AATC,KAAb;AAaA,UAAKS,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,+BAA1B;AAjBe;AAmBlB,G,CAED;AACA;;;;;WAwEA,6BAAoB;AAEhBrC,MAAAA,MAAM,CAACuC,IAAP,CAAY,YAAZ,KAA6B,KAAKH,iBAAL,EAA7B;AACA,OAACpC,MAAM,CAACuC,IAAP,CAAY,YAAZ,CAAD,IAA8B,KAAKD,kBAAL,EAA9B;AAEH;;;WAED,8BAAqB;AAEjBtC,MAAAA,MAAM,CAACuC,IAAP,CAAY,YAAZ,KAA6B,KAAKH,iBAAL,EAA7B;AACA,OAACpC,MAAM,CAACuC,IAAP,CAAY,YAAZ,CAAD,IAA8B,KAAKD,kBAAL,EAA9B;AAEH;;;WAED,kBAAS;AAEL,0BACR,uDACY,oBAAC,MAAD,OADZ,EAGa,KAAKJ,KAAL,CAAWd,OAAX,iBAAwB,oBAAC,YAAD,qBAHrC,EAKa,CAAC,KAAKc,KAAL,CAAWd,OAAZ,iBACb,uDACgB,oBAAC,aAAD,qBAEI,oBAAC,WAAD,qBAEI,wCAFJ,eAGI,+BAAI,KAAKc,KAAL,CAAWb,KAAf,CAHJ,eAKI;AAAK,QAAA,GAAG,EAAE,KAAKa,KAAL,CAAWb,KAArB;AAA4B,QAAA,GAAG,EAAE,KAAKa,KAAL,CAAWV;AAA5C,QALJ,eAOI,8CAPJ,eAQI,+BAAI,KAAKU,KAAL,CAAWX,WAAf,CARJ,eAUI,wCAVJ,eAWI,+BAAIiB,MAAM,CAAC,KAAKN,KAAL,CAAWZ,KAAZ,CAAN,CAAyBmB,OAAzB,CAAiC,CAAjC,CAAJ,YAXJ,eAaI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAE,KAAKP,KAAL,CAAWT,OAA/B;AAAwC,QAAA,MAAM,EAAE,KAAKhB,KAAL,CAAWC;AAA3D,QAbJ,EAeK,KAAKwB,KAAL,CAAWT,OAAX,IAAsB,CAAtB,IAA2B,KAAKS,KAAL,CAAWT,OAAX,GAAqB,CAAhD,iBAEG;AAAI,QAAA,SAAS,EAAC;AAAd,kBAA+B,KAAKS,KAAL,CAAWT,OAA1C,aAjBR,EAqBK,KAAKS,KAAL,CAAWT,OAAX,KAAuB,CAAvB,iBAEG,oBAAC,kBAAD;AAAoB,QAAA,MAAM,EAAE,KAAKS,KAAL,CAAWxB;AAAvC,QAvBR,CAFJ,CADhB,eAmCgB,oBAAC,WAAD;AAAa,QAAA,MAAM,EAAE,KAAKwB,KAAL,CAAWP,MAAhC;AAAwC,QAAA,MAAM,EAAE,KAAKlB,KAAL,CAAWC;AAA3D,QAnChB,CANA,CADQ;AAgDH;;;;;;;;;;;EAhKkBX,S;;eAoKRS,Q;AAAf;;;;;;;;;;0BApKMA,Q","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\n\nimport Header from '../components/Header';\nimport StyleOfItem from '../components/styles/StyleOfItem';\nimport LoadingStyle from '../components/styles/LoadingStyle';\nimport AddToCart from '../components/AddToCart';\nimport ReviewStats from '../components/ReviewStats';\nimport ItemAvailableAgain from '../components/ItemAvailableAgain';\nimport ViewItemStyle from '../components/styles/ViewItemStyle';\n\nclass ViewItem extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n\n            loading: true,\n            title: '',\n            description: '',\n            image: '',\n            price: undefined,\n            inStock: undefined,\n            itemId: undefined,\n            userId: null,\n\n        }\n\n        this.fetchDataLoggedIn = this.fetchDataLoggedIn.bind(this);\n        this.fetchDataLoggedOut = this.fetchDataLoggedOut.bind(this);\n\n    }\n\n    // there are 2 middleware for showing the reviews because in the one where the user is logged in I send the userId so that we have a way to show the user the button \"remove review\"\n    // if the review shown it's his\n    fetchDataLoggedIn = () => {\n\n        const itemId = this.props.itemId;\n\n        fetch(`http://localhost:8090/view-item-in/${itemId}`, {\n\n            method: 'GET',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ loading: false, title: resData.title, price: resData.price, \n                description: resData.description, image: resData.image, inStock: resData.stock, itemId: resData.itemId, userId: resData.userId });\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n    fetchDataLoggedOut = () => {\n\n        const itemId = this.props.itemId;\n\n        fetch(`${process.env.LOCALHOST}/view-item-out/${itemId}`, {\n\n            method: 'GET',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ loading: false, title: resData.title, price: resData.price, \n                description: resData.description, image: resData.image, inStock: resData.stock, itemId: resData.itemId });\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n\n    componentDidMount() {\n\n        cookie.load('authCookie') && this.fetchDataLoggedIn();\n        !cookie.load('authCookie') && this.fetchDataLoggedOut();\n\n    }\n\n    componentDidUpdate() {\n\n        cookie.load('authCookie') && this.fetchDataLoggedIn();\n        !cookie.load('authCookie') && this.fetchDataLoggedOut();\n\n    }\n\n    render() {\n\n        return (\n<>\n            <Header />\n\n            {this.state.loading && ( <LoadingStyle>Loading...</LoadingStyle> )}\n\n            {!this.state.loading && (\n<>\n                <ViewItemStyle>\n\n                    <StyleOfItem>\n\n                        <h1>title</h1>\n                        <p>{this.state.title}</p>\n\n                        <img alt={this.state.title} src={this.state.image}></img>\n\n                        <h1>description</h1>\n                        <p>{this.state.description}</p>\n\n                        <h1>price</h1>\n                        <p>{Number(this.state.price).toFixed(2)} â‚¬</p>\n\n                        <AddToCart inStock={this.state.inStock} itemId={this.props.itemId} />\n\n                        {this.state.inStock <= 5 && this.state.inStock > 0 && (\n\n                            <h1 className=\"few-left\">only {this.state.inStock} left!!!</h1>\n\n                        )}\n\n                        {this.state.inStock === 0 && (\n\n                            <ItemAvailableAgain itemId={this.state.itemId} />\n\n                        )}\n\n                    </StyleOfItem>\n\n                </ViewItemStyle>\n\n                {/* sending the user id so that we have a way to show the remove review button only if review is of the user */}\n                <ReviewStats userId={this.state.userId} itemId={this.props.itemId} />\n</>\n            )}\n</>\n        )\n\n    }\n\n}\n\nexport default ViewItem;"]},"metadata":{},"sourceType":"module"}