{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport Form from '../components/styles/Form';\nimport Header from '../components/Header';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nvar ChangeDetails = /*#__PURE__*/function (_Component) {\n  _inherits(ChangeDetails, _Component);\n\n  var _super = _createSuper(ChangeDetails);\n\n  function ChangeDetails() {\n    var _this;\n\n    _classCallCheck(this, ChangeDetails);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      name: '',\n      email: '',\n      newPassword: '',\n      confirmPassword: '',\n      oldPassword: '',\n      loading: false,\n      message: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputs\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/change-details\"), {\n        method: 'PATCH',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          email: _this.state.email,\n          name: _this.state.name,\n          newPassword: _this.state.newPassword,\n          confirmPassword: _this.state.confirmPassword,\n          oldPassword: _this.state.oldPassword\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          loading: false,\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ChangeDetails, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, null), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === 'Invalid email' || this.state.message === 'passwords do not match!' || this.state.message === 'password needs to be at least 5 characters' || this.state.message === 'password is wrong, please confirm your password in order to change your details' ? 'red' : ''\n      }, this.state.message)), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.fetchData\n      }, /*#__PURE__*/React.createElement(\"fieldset\", {\n        \"aria-busy\": this.state.loading,\n        disabled: this.state.loading\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"name\"\n      }, \"Name\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"name\",\n        type: \"text\",\n        value: this.state.name,\n        onChange: this.handleInputs,\n        placeholder: \"enter your new name\"\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"email\"\n      }, \"Email\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        value: this.state.email,\n        onChange: this.handleInputs,\n        placeholder: \"enter your new email\",\n        className: this.state.message === 'Invalid email' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"password\"\n      }, \"New Password\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"newPassword\",\n        type: \"password\",\n        value: this.state.newPassword,\n        onChange: this.handleInputs,\n        placeholder: \"enter your new password\",\n        className: this.state.message === 'password needs to be at least 5 characters' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"password\"\n      }, \"Confirm New Password\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"confirmPassword\",\n        type: \"password\",\n        value: this.state.confirmPassword,\n        onChange: this.handleInputs,\n        placeholder: \"confirm your new password\",\n        className: this.state.message === 'passwords do not match!' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"old password\"\n      }, \"Confirm Old Password\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"oldPassword\",\n        type: \"password\",\n        value: this.state.oldPassword,\n        onChange: this.handleInputs,\n        placeholder: \"confirm your old password\",\n        className: this.state.message === 'password is wrong, please confirm your password in order to change your details' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"button\", null, \"Chang\", this.state.loading ? 'ing' : 'e', \" Details!\"), /*#__PURE__*/React.createElement(Link, {\n        href: \"/reset-password\"\n      }, /*#__PURE__*/React.createElement(\"button\", null, \"Forgot Password?\")))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return ChangeDetails;\n}(Component);\n\nvar _default = ChangeDetails;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ChangeDetails, \"ChangeDetails\", \"/Users/stefano.mezza/e-commerce/frontend/components/ChangeDetails.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/e-commerce/frontend/components/ChangeDetails.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/e-commerce/frontend/components/ChangeDetails.js"],"names":["React","Component","Link","Form","Header","MessageStyles","ChangeDetails","name","email","newPassword","confirmPassword","oldPassword","loading","message","e","setState","target","value","preventDefault","fetch","process","env","NEXT_PUBLIC_API_URL","method","headers","credentials","body","JSON","stringify","state","then","res","json","resData","err","console","log","fetchData","handleInputs"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\n\nimport Form from '../components/styles/Form';\nimport Header from '../components/Header';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nclass ChangeDetails extends Component {\n\n    state = {\n\n        name: '',\n        email: '',\n        newPassword: '',\n        confirmPassword: '',\n        oldPassword: '',\n        loading: false,\n        message: null,\n\n    }\n\n    handleInputs = e => {\n\n        this.setState({ [e.target.name]: e.target.value });\n\n    }\n\n    fetchData = e => {\n\n        e.preventDefault();\n\n        this.setState({ loading: true });\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/change-details`, {\n\n            method: 'PATCH',\n\n            headers: {\n\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n            body: JSON.stringify({\n\n                email: this.state.email,\n                name: this.state.name,\n                newPassword: this.state.newPassword,\n                confirmPassword: this.state.confirmPassword,\n                oldPassword: this.state.oldPassword,\n\n            })\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ loading: false, message: resData.message })\n\n        })\n\n        .catch(err => console.log(err))\n\n    }\n\n    render() {\n\n        return (\n<>\n\n            <Header />\n\n            {this.state.message && (<MessageStyles><h1 className={\n\n                this.state.message === 'Invalid email' || this.state.message === 'passwords do not match!' || this.state.message === 'password needs to be at least 5 characters' ||\n                this.state.message === 'password is wrong, please confirm your password in order to change your details' ? 'red' : ''\n\n            }>{this.state.message}</h1></MessageStyles>)}\n\n            <Form onSubmit={this.fetchData}>\n\n                <fieldset aria-busy={this.state.loading} disabled={this.state.loading}>\n\n                    <label htmlFor=\"name\">\n\n                        Name\n\n                        <input\n\n                            name=\"name\"\n                            type=\"text\"\n                            value={this.state.name}\n                            onChange={this.handleInputs}\n                            placeholder=\"enter your new name\"\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"email\">\n\n                        Email\n\n                        <input\n\n                            name=\"email\"\n                            type=\"email\"\n                            value={this.state.email}\n                            onChange={this.handleInputs}\n                            placeholder=\"enter your new email\"\n                            className={this.state.message === 'Invalid email' ? 'invalid' : ''}\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"password\">\n\n                        New Password\n\n                        <input\n\n                            name=\"newPassword\"\n                            type=\"password\"\n                            value={this.state.newPassword}\n                            onChange={this.handleInputs}\n                            placeholder=\"enter your new password\"\n                            className={this.state.message === 'password needs to be at least 5 characters' ? 'invalid' : ''}\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"password\">\n\n                        Confirm New Password\n\n                        <input\n\n                            name=\"confirmPassword\"\n                            type=\"password\"\n                            value={this.state.confirmPassword}\n                            onChange={this.handleInputs}\n                            placeholder=\"confirm your new password\"\n                            className={this.state.message === 'passwords do not match!' ? 'invalid' : ''}\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"old password\">\n\n                        Confirm Old Password\n\n                        <input\n\n                            name=\"oldPassword\"\n                            type=\"password\"\n                            value={this.state.oldPassword}\n                            onChange={this.handleInputs}\n                            placeholder=\"confirm your old password\"\n                            className={this.state.message === 'password is wrong, please confirm your password in order to change your details' ? 'invalid' : ''}\n\n                        />\n\n                    </label>\n\n                    <button>Chang{this.state.loading ? 'ing': 'e'} Details!</button>\n\n                    <Link href=\"/reset-password\"><button>Forgot Password?</button></Link>\n\n                </fieldset>\n\n            </Form>\n</>\n        )\n\n    }\n\n}\n\nexport default ChangeDetails;"]},"metadata":{},"sourceType":"module"}