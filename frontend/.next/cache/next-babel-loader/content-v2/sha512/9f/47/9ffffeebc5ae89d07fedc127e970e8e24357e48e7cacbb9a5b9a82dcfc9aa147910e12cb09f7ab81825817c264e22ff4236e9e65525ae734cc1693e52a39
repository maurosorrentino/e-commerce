{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport FormData from 'form-data';\nimport Form from './styles/Form';\nimport MessageStyles from '../components/styles/MessageStyles';\nimport RemoveItem from '../components/RemoveItem';\n\nvar EditItem = /*#__PURE__*/function (_Component) {\n  _inherits(EditItem, _Component);\n\n  var _super = _createSuper(EditItem);\n\n  function EditItem() {\n    var _this;\n\n    _classCallCheck(this, EditItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      title: _this.props.title,\n      price: _this.props.price,\n      description: _this.props.description,\n      image: _this.props.img,\n      stock: _this.props.stock,\n      loading: false,\n      message: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputs\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleImageUpload\", function () {\n      // destructuring\n      var imageFile = document.getElementById('image-test');\n      var files = imageFile.files; // debugging purposes\n\n      console.log('Image file: ', files[0]);\n      var formData = new FormData(); // getting the 1st file that we find\n\n      formData.append('file', files[0]); // appending cloudinary preset (folder where it will be stored the file)\n\n      formData.append('upload_preset', process.env.PRESET);\n      return fetch(process.env.CLOUDINARY, {\n        method: 'POST',\n        body: formData\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        // changing the state so that we can assign an url to the image\n        _this.setState({\n          image: res.secure_url\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n      var itemId = _this.props.itemId;\n\n      _this.setState({\n        loading: true\n      });\n\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/edit-item/\").concat(itemId), {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          title: _this.state.title,\n          price: _this.state.price,\n          description: _this.state.description,\n          stock: _this.state.stock,\n          image: _this.state.image\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          loading: false,\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        _this.setState({\n          loading: false\n        });\n\n        console.log(err);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(EditItem, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === 'Title needs to be at least 3 characters' || this.state.message === 'Price cannot be less or equal than 0' || this.state.message === 'Description needs to be at least 5 characters' || this.state.message === 'the number has to be an integer' ? 'red' : '',\n        id: \"message-test\"\n      }, this.state.message)), /*#__PURE__*/React.createElement(Form, {\n        key: this.props.itemId,\n        id: \"form-test\",\n        encType: \"multipart/form-data\",\n        onSubmit: this.handleSubmit\n      }, /*#__PURE__*/React.createElement(\"fieldset\", {\n        \"aria-busy\": this.state.loading,\n        disabled: this.state.loading\n      }, /*#__PURE__*/React.createElement(\"h1\", null, \"Edit\", this.state.loading ? 'ing ' : '', \" Item\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"cookie\",\n        value: cookie.load('connect.sid')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"XSRF-TOKEN\",\n        value: cookie.load('token')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"authCookie\",\n        value: cookie.load('authCookie')\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"title\"\n      }, \"Title\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"title\",\n        id: \"title-test\",\n        placeholder: \"enter a title\",\n        value: this.state.title,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Title needs to be at least 3 characters' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"price\"\n      }, \"Price \\u20AC\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"price\",\n        type: \"number\",\n        id: \"price-test\",\n        placeholder: \"enter a price\",\n        value: this.state.price,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Price cannot be less or equal than 0' ? 'invalid' : '',\n        min: \"0.01\",\n        step: \"0.01\"\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"image\"\n      }, \"Image\", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        name: \"image\",\n        id: \"image-test\",\n        placeholder: \"upload an image\",\n        onChange: this.handleImageUpload\n      })), this.state.image && /*#__PURE__*/React.createElement(\"figure\", null, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.image,\n        alt: this.state.title\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"description\"\n      }, \"Description\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"description\",\n        id: \"description-test\",\n        placeholder: \"enter a description\",\n        value: this.state.description,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Description needs to be at least 5 characters' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"stock\"\n      }, \"How many items do you have in stock?\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"stock\",\n        type: \"number\",\n        id: \"stock-test\",\n        placeholder: \"enter how many items you have in stock\",\n        value: this.state.stock,\n        step: \"1\",\n        onChange: this.handleInputs,\n        className: this.state.message === 'Items in stock need to be grater than 0' || this.state.message === 'the number has to be an integer' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"button\", null, this.state.loading ? 'Editing Item!' : 'Edit Item!'), /*#__PURE__*/React.createElement(RemoveItem, {\n        itemId: this.props.itemId\n      }))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return EditItem;\n}(Component);\n\nvar _default = EditItem;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(EditItem, \"EditItem\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/EditItem.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/EditItem.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/EditItem.js"],"names":["React","Component","cookie","FormData","Form","MessageStyles","RemoveItem","EditItem","title","props","price","description","image","img","stock","loading","message","e","setState","target","name","value","imageFile","document","getElementById","files","console","log","formData","append","process","env","PRESET","fetch","CLOUDINARY","method","body","then","res","json","secure_url","err","preventDefault","itemId","NEXT_PUBLIC_API_URL","headers","credentials","JSON","stringify","state","resData","handleSubmit","load","handleInputs","handleImageUpload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport FormData from 'form-data';\n\nimport Form from './styles/Form';\nimport MessageStyles from '../components/styles/MessageStyles';\nimport RemoveItem from '../components/RemoveItem';\n\nclass EditItem extends Component {\n\n    state = {\n\n        title: this.props.title,\n        price: this.props.price,\n        description: this.props.description,\n        image: this.props.img,\n        stock: this.props.stock,\n        loading: false,\n        message: null,\n\n    }\n\n    // handling inputs of the user\n    handleInputs = e => {\n\n        this.setState({ [e.target.name] : e.target.value });\n\n    }\n\n    handleImageUpload = () => {\n\n        // destructuring\n        const imageFile = document.getElementById('image-test');\n        const files = imageFile.files;\n\n        // debugging purposes\n        console.log('Image file: ', files[0]);\n\n        const formData = new FormData();\n\n        // getting the 1st file that we find\n        formData.append('file', files[0]);\n\n        // appending cloudinary preset (folder where it will be stored the file)\n        formData.append('upload_preset', process.env.PRESET);\n\n        return fetch(process.env.CLOUDINARY, {\n\n            method: 'POST',\n            body: formData,\n\n        })\n\n            .then(res => res.json())\n\n            .then(res => { \n\n                // changing the state so that we can assign an url to the image\n                this.setState({ image: res.secure_url });\n\n            })\n\n            .catch(err => console.log(err));\n\n    };\n\n    // connecting react with node in order to have a connection between the client side and the database\n    handleSubmit = e => {\n\n        e.preventDefault();\n\n        const itemId = this.props.itemId;\n        this.setState({ loading: true });\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/edit-item/${itemId}`, {\n\n            method: 'PATCH',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: \"include\",\n\n            body: JSON.stringify({\n\n                title: this.state.title,\n                price: this.state.price,\n                description: this.state.description,\n                stock: this.state.stock,\n                image: this.state.image,\n\n            })\n\n        })\n\n        .then(res => { \n\n            return res.json();\n\n        })\n\n        .then(resData => { \n\n            this.setState({ loading: false, message: resData.message });\n\n        })\n\n        .catch(err => {\n\n            this.setState({ loading: false });\n            console.log(err);\n\n        })\n\n    }\n\n    render() {\n\n        return (\n<>\n            { this.state.message && (<MessageStyles><h1 className={\n\n                this.state.message === 'Title needs to be at least 3 characters' || this.state.message === 'Price cannot be less or equal than 0' || \n                this.state.message === 'Description needs to be at least 5 characters' || this.state.message === 'the number has to be an integer' ? 'red' : ''\n\n            } id=\"message-test\">{this.state.message}</h1></MessageStyles> ) }\n\n            <Form key={this.props.itemId} id=\"form-test\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n\n                <fieldset aria-busy={this.state.loading} disabled={this.state.loading}>\n\n                    <h1>Edit{this.state.loading ? 'ing ' : ''} Item</h1>\n\n                    {/* checking presents of cookies (we also check on the backend the values) */}\n                    <input type=\"hidden\" name=\"cookie\" value={cookie.load('connect.sid')} />\n                    <input type=\"hidden\" name=\"XSRF-TOKEN\" value={cookie.load('token')} />\n                    <input type=\"hidden\" name=\"authCookie\" value={cookie.load('authCookie')} />\n\n                    <label htmlFor=\"title\">\n\n                        Title\n\n                        <input\n\n                            name=\"title\"\n                            id=\"title-test\"\n                            placeholder=\"enter a title\"\n                            value={this.state.title}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Title needs to be at least 3 characters' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"price\">\n\n                        Price â‚¬\n\n                        <input\n\n                            name=\"price\"\n                            type=\"number\"\n                            id=\"price-test\"\n                            placeholder=\"enter a price\"\n                            value={this.state.price}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Price cannot be less or equal than 0' ? 'invalid' : '' }\n                            min=\"0.01\"\n                            step=\"0.01\"\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"image\">\n\n                        Image\n\n                        <input\n\n                            type=\"file\"\n                            name=\"image\"\n                            id=\"image-test\"\n                            placeholder=\"upload an image\"\n                            onChange={this.handleImageUpload}\n\n                        />\n\n                    </label>\n\n                    {/* showing preview */}\n                    {this.state.image && (\n\n                        <figure>\n\n                            <img src={this.state.image} alt={this.state.title} />\n                            \n                        </figure>\n\n                    )}\n\n                    <label htmlFor=\"description\">\n\n                        Description\n\n                        <input\n\n                            name=\"description\"\n                            id=\"description-test\"\n                            placeholder=\"enter a description\"\n                            value={this.state.description}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Description needs to be at least 5 characters' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"stock\">\n\n                        How many items do you have in stock?\n\n                        <input\n\n                            name=\"stock\"\n                            type=\"number\"\n                            id=\"stock-test\"\n                            placeholder=\"enter how many items you have in stock\"\n                            value={this.state.stock}\n                            step=\"1\"\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Items in stock need to be grater than 0'\n                            || this.state.message === 'the number has to be an integer' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <button>{this.state.loading ? 'Editing Item!' : 'Edit Item!'}</button>\n\n                    <RemoveItem itemId={this.props.itemId} />\n\n                </fieldset>\n\n            </Form>\n</>\n        )\n\n    }\n\n}\n\nexport default EditItem;"]},"metadata":{},"sourceType":"module"}