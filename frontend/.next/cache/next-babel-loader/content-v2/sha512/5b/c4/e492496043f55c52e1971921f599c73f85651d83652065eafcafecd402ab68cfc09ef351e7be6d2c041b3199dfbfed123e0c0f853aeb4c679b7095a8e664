{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport FormData from 'form-data';\nimport Form from './styles/Form';\nimport Header from '../components/Header';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nvar Sell = /*#__PURE__*/function (_Component) {\n  _inherits(Sell, _Component);\n\n  var _super = _createSuper(Sell);\n\n  function Sell() {\n    var _this;\n\n    _classCallCheck(this, Sell);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      title: '',\n      price: 0,\n      description: '',\n      stock: 0,\n      image: null,\n      loading: false,\n      message: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputs\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleImageUpload\", function () {\n      // destructuring\n      var imageFile = document.getElementById('image-test');\n      var files = imageFile.files; // debugging purposes\n\n      console.log('Image file: ', files[0]);\n      var formData = new FormData(); // getting the 1st file that we find\n\n      formData.append('file', files[0]); // appending cloudinary preset (folder where it will be stored the file)\n\n      formData.append('upload_preset', process.env.PRESET);\n      return fetch(process.env.CLOUDINARY, {\n        method: 'POST',\n        body: formData\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        // changing the state so that we can assign an url to the image\n        _this.setState({\n          image: res.secure_url\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/sell\"), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          title: _this.state.title,\n          price: _this.state.price,\n          description: _this.state.description,\n          stock: _this.state.stock,\n          image: _this.state.image\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          loading: false,\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        _this.setState({\n          loading: false\n        });\n\n        console.log(err);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Sell, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, null), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === 'Title needs to be at least 3 characters' || this.state.message === 'Price cannot be less or equal than 0' || this.state.message === 'you need to upload an image' || this.state.message === 'Description needs to be at least 5 characters' || this.state.message === 'Items in stock need to be grater than 0' || this.state.message === 'the number has to be an integer' ? 'red' : '',\n        id: \"message-test\"\n      }, this.state.message)), /*#__PURE__*/React.createElement(Form, {\n        id: \"form-test\",\n        encType: \"multipart/form-data\",\n        onSubmit: this.handleSubmit\n      }, /*#__PURE__*/React.createElement(\"fieldset\", {\n        \"aria-busy\": this.state.loading,\n        disabled: this.state.loading\n      }, /*#__PURE__*/React.createElement(\"h1\", null, \"Creat\", this.state.loading ? 'ing ' : 'e ', \"An Item\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"cookie\",\n        value: cookie.load('connect.sid')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"XSRF-TOKEN\",\n        value: cookie.load('token')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"authCookie\",\n        value: cookie.load('authCookie')\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"title\"\n      }, \"Title\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"title\",\n        id: \"title-test\",\n        placeholder: \"enter a title\",\n        value: this.state.title,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Title needs to be at least 3 characters' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"price\"\n      }, \"Price \\u20AC\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"price\",\n        type: \"number\",\n        id: \"price-test\",\n        placeholder: \"enter a price\",\n        value: this.state.price,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Price cannot be less or equal than 0' ? 'invalid' : '',\n        min: \"0.01\",\n        step: \"0.01\"\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"image\"\n      }, \"Image\", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        name: \"image\",\n        id: \"image-test\",\n        placeholder: \"upload an image\",\n        onChange: this.handleImageUpload,\n        className: this.state.message === 'you need to upload an image' ? 'invalid' : ''\n      })), this.state.image && /*#__PURE__*/React.createElement(\"figure\", null, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.image,\n        alt: this.state.title\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"description\"\n      }, \"Description\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"description\",\n        id: \"description-test\",\n        placeholder: \"enter a description\",\n        value: this.state.description,\n        onChange: this.handleInputs,\n        className: this.state.message === 'Description needs to be at least 5 characters' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"stock\"\n      }, \"How many items do you have in stock?\", /*#__PURE__*/React.createElement(\"input\", {\n        name: \"stock\",\n        type: \"number\",\n        id: \"stock-test\",\n        placeholder: \"enter how many items you have in stock\",\n        value: this.state.stock,\n        step: \"1\",\n        onChange: this.handleInputs,\n        className: this.state.message === 'Items in stock need to be grater than 0' || this.state.message === 'the number has to be an integer' ? 'invalid' : ''\n      })), /*#__PURE__*/React.createElement(\"button\", null, this.state.loading ? 'Creating An Item!' : 'Create An Item!'))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Sell;\n}(Component);\n\nvar _default = Sell;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Sell, \"Sell\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Sell.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Sell.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/Sell.js"],"names":["React","Component","cookie","FormData","Form","Header","MessageStyles","Sell","title","price","description","stock","image","loading","message","e","setState","target","name","value","imageFile","document","getElementById","files","console","log","formData","append","process","env","PRESET","fetch","CLOUDINARY","method","body","then","res","json","secure_url","err","preventDefault","NEXT_PUBLIC_API_URL","headers","credentials","JSON","stringify","state","resData","handleSubmit","load","handleInputs","handleImageUpload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport FormData from 'form-data';\n\nimport Form from './styles/Form';\nimport Header from '../components/Header';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nclass Sell extends Component {\n\n    state = {\n\n        title: '',\n        price: 0,\n        description: '',\n        stock: 0,\n        image: null,\n        loading: false,\n        message: null,\n\n    }\n\n    // handling inputs of the user\n    handleInputs = e => {\n\n        this.setState({ [e.target.name] : e.target.value });\n\n    }\n\n    handleImageUpload = () => {\n\n        // destructuring\n        const imageFile = document.getElementById('image-test');\n        const files = imageFile.files;\n\n        // debugging purposes\n        console.log('Image file: ', files[0]);\n\n        const formData = new FormData();\n\n        // getting the 1st file that we find\n        formData.append('file', files[0]);\n\n        // appending cloudinary preset (folder where it will be stored the file)\n        formData.append('upload_preset', process.env.PRESET);\n\n        return fetch(process.env.CLOUDINARY, {\n\n            method: 'POST',\n            body: formData,\n\n        })\n\n            .then(res => res.json())\n\n            .then(res => { \n\n                // changing the state so that we can assign an url to the image\n                this.setState({ image: res.secure_url });\n\n            })\n\n            .catch(err => console.log(err));\n\n    };\n\n    // connecting react with node in order to have a connection between the client side and the database\n    handleSubmit = e => {\n\n        e.preventDefault();\n\n        this.setState({ loading: true });\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/sell`, {\n\n            method: 'PUT',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: \"include\",\n\n            body: JSON.stringify({\n\n                title: this.state.title,\n                price: this.state.price,\n                description: this.state.description,\n                stock: this.state.stock,\n                image: this.state.image,\n\n            })\n\n        })\n\n        .then(res => { \n\n            return res.json();\n\n        })\n\n        .then(resData => { \n\n            this.setState({ loading: false, message: resData.message });\n\n        })\n\n        .catch(err => {\n\n            this.setState({ loading: false });\n            console.log(err);\n\n        })\n\n    }\n\n    render() {\n\n        return (\n<>\n            <Header />\n\n            { this.state.message && (<MessageStyles><h1 className={\n\n                this.state.message === 'Title needs to be at least 3 characters' || this.state.message === 'Price cannot be less or equal than 0' || \n                this.state.message === 'you need to upload an image' || this.state.message === 'Description needs to be at least 5 characters' ||\n                this.state.message === 'Items in stock need to be grater than 0' || this.state.message === 'the number has to be an integer' ? 'red' : ''\n\n            } id=\"message-test\">{this.state.message}</h1></MessageStyles> ) }\n\n            <Form id=\"form-test\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n\n                <fieldset aria-busy={this.state.loading} disabled={this.state.loading}>\n\n                    <h1>Creat{this.state.loading ? 'ing ' : 'e '}An Item</h1>\n\n                    {/* checking presents of cookies (we also check on the backend the values) */}\n                    <input type=\"hidden\" name=\"cookie\" value={cookie.load('connect.sid')} />\n                    <input type=\"hidden\" name=\"XSRF-TOKEN\" value={cookie.load('token')} />\n                    <input type=\"hidden\" name=\"authCookie\" value={cookie.load('authCookie')} />\n\n                    <label htmlFor=\"title\">\n\n                        Title\n\n                        <input\n\n                            name=\"title\"\n                            id=\"title-test\"\n                            placeholder=\"enter a title\"\n                            value={this.state.title}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Title needs to be at least 3 characters' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"price\">\n\n                        Price â‚¬\n\n                        <input\n\n                            name=\"price\"\n                            type=\"number\"\n                            id=\"price-test\"\n                            placeholder=\"enter a price\"\n                            value={this.state.price}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Price cannot be less or equal than 0' ? 'invalid' : '' }\n                            min=\"0.01\"\n                            step=\"0.01\"\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"image\">\n\n                        Image\n\n                        <input\n\n                            type=\"file\"\n                            name=\"image\"\n                            id=\"image-test\"\n                            placeholder=\"upload an image\"\n                            onChange={this.handleImageUpload}\n                            className={this.state.message === 'you need to upload an image' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    {/* showing preview */}\n                    {this.state.image && (\n\n                        <figure>\n\n                            <img src={this.state.image} alt={this.state.title} />\n\n                        </figure>\n\n                    )}\n\n                    <label htmlFor=\"description\">\n\n                        Description\n\n                        <input\n\n                            name=\"description\"\n                            id=\"description-test\"\n                            placeholder=\"enter a description\"\n                            value={this.state.description}\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Description needs to be at least 5 characters' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <label htmlFor=\"stock\">\n\n                        How many items do you have in stock?\n\n                        <input\n\n                            name=\"stock\"\n                            type=\"number\"\n                            id=\"stock-test\"\n                            placeholder=\"enter how many items you have in stock\"\n                            value={this.state.stock}\n                            step=\"1\"\n                            onChange={this.handleInputs}\n                            className={this.state.message === 'Items in stock need to be grater than 0'\n                            || this.state.message === 'the number has to be an integer' ? 'invalid' : '' }\n\n                        />\n\n                    </label>\n\n                    <button>{this.state.loading ? 'Creating An Item!' : 'Create An Item!'}</button>\n\n                </fieldset>\n\n            </Form>\n</>\n        )\n\n    }\n\n}\n\nexport default Sell;"]},"metadata":{},"sourceType":"module"}