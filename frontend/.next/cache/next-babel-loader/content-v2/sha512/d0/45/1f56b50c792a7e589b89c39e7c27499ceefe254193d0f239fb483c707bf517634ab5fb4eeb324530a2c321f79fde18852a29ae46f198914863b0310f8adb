{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nvar ItemAvailableAgain = /*#__PURE__*/function (_Component) {\n  _inherits(ItemAvailableAgain, _Component);\n\n  var _super = _createSuper(ItemAvailableAgain);\n\n  function ItemAvailableAgain() {\n    var _this;\n\n    _classCallCheck(this, ItemAvailableAgain);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      message: null,\n      email: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchDataLoggedIn\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"\".concat(process.env.LOCALHOST, \"/email-me-item/\").concat(itemId), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: 'include'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pleaseEnterYourEmail\", function () {\n      _this.setState({\n        message: 'please enter your email'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchDataLoggedOut\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"\".concat(process.env.LOCALHOST, \"/email-me-item-out/\").concat(itemId), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          email: _this.state.email\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState({\n        email: e.target.value\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ItemAvailableAgain, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, cookie.load('authCookie') && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.fetchDataLoggedIn\n      }, \"Email Me When It Will Be Available Again!\"), !cookie.load('authCookie') && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.pleaseEnterYourEmail\n      }, \"Email Me When It Will Be Available Again!\"), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === 'you already requested a follow up email notification for this item' ? 'red' : ''\n      }, this.state.message)), this.state.message === 'please enter your email' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        onChange: this.handleChange,\n        placeholder: \"enter your email\",\n        value: this.state.email\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.fetchDataLoggedOut,\n        id: \"button-logged-out\"\n      }, \"Send Me An Email\")));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return ItemAvailableAgain;\n}(Component);\n\nvar _default = ItemAvailableAgain;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ItemAvailableAgain, \"ItemAvailableAgain\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ItemAvailableAgain.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ItemAvailableAgain.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/ItemAvailableAgain.js"],"names":["React","Component","cookie","MessageStyles","ItemAvailableAgain","message","email","itemId","props","fetch","process","env","LOCALHOST","method","headers","credentials","then","res","json","resData","setState","err","console","log","body","JSON","stringify","state","e","target","value","load","fetchDataLoggedIn","pleaseEnterYourEmail","handleChange","fetchDataLoggedOut"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\n\nimport MessageStyles from '../components/styles/MessageStyles';\n\nclass ItemAvailableAgain extends Component {\n\n    state = {\n\n        message: null,\n        email: '',\n\n    }\n\n    // so here we handle the middleware if the user is signed in (if statement !req.session wasn't working properly so I came out with this solution)\n    fetchDataLoggedIn = () => {\n\n        const itemId = this.props.itemId;\n\n        fetch(`${process.env.LOCALHOST}/email-me-item/${itemId}`, {\n\n            method: 'PUT',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ message: resData.message });\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n    // here is the function where I only show the user the message please enter your email\n    pleaseEnterYourEmail = () => {\n\n        this.setState({ message: 'please enter your email' })\n\n    }\n\n    // so here we handle the middleware if the user is signed out (if statement !req.session wasn't working properly so I came out with this solution)\n    fetchDataLoggedOut = () => {\n\n        const itemId = this.props.itemId;\n\n        fetch(`${process.env.LOCALHOST}/email-me-item-out/${itemId}`, {\n\n            method: 'PUT',\n\n            headers: {\n\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n            body: JSON.stringify({\n\n                email: this.state.email,\n\n            })\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {\n\n            this.setState({ message: resData.message });\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n    handleChange = e => {\n\n        this.setState({ email: e.target.value });\n\n    }\n\n    render() {\n\n        return (\n<>\n            { cookie.load('authCookie') && (<button onClick={this.fetchDataLoggedIn}>Email Me When It Will Be Available Again!</button>)}\n\n            { !cookie.load('authCookie') && (<button onClick={this.pleaseEnterYourEmail}>Email Me When It Will Be Available Again!</button>)}\n\n            {this.state.message && (\n\n                <MessageStyles><h1 className={this.state.message === 'you already requested a follow up email notification for this item' ? \n                'red' : ''}>{this.state.message}</h1></MessageStyles>\n\n            )}\n\n            {this.state.message === 'please enter your email' && (\n<>\n                <input\n\n                    type=\"email\"\n                    name=\"email\"\n                    onChange={this.handleChange}\n                    placeholder=\"enter your email\"\n                    value={this.state.email}\n\n                />\n\n                <button onClick={this.fetchDataLoggedOut} id=\"button-logged-out\">Send Me An Email</button>\n</>\n            )}\n</>\n        )\n\n    }\n\n}\n\nexport default ItemAvailableAgain;"]},"metadata":{},"sourceType":"module"}