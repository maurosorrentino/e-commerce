{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport MessageStyles from '../components/styles/MessageStyles';\n\nvar AddToCart = /*#__PURE__*/function (_Component) {\n  _inherits(AddToCart, _Component);\n\n  var _super = _createSuper(AddToCart);\n\n  function AddToCart() {\n    var _this;\n\n    _classCallCheck(this, AddToCart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      message: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addToCart\", function () {\n      var itemId = _this.props.itemId;\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/api/add-to-cart/\").concat(itemId), {\n        method: 'PATCH',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          message: resData.message\n        });\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n    });\n\n    return _this;\n  }\n\n  _createClass(AddToCart, [{\n    key: \"render\",\n    value: function render() {\n      var disabled = this.props.inStock === 0;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        encType: \"multipart/form-data\"\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"cookie\",\n        value: cookie.load('connect.sid')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"XSRF-TOKEN\",\n        value: cookie.load('token')\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"authCookie\",\n        value: cookie.load('authCookie')\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        disabled: disabled,\n        onClick: this.addToCart\n      }, \"Add To Cart\"), this.state.message && /*#__PURE__*/React.createElement(MessageStyles, null, /*#__PURE__*/React.createElement(\"h1\", {\n        className: this.state.message === \"we only have \".concat(this.props.inStock, \" left into the store\") || this.state.message === 'you need to login in in order to take this action' ? 'red' : ''\n      }, this.state.message))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: // @ts-ignore\n    function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return AddToCart;\n}(Component);\n\nvar _default = AddToCart;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(AddToCart, \"AddToCart\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/AddToCart.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/stefano.mezza/Downloads/e-commerce/frontend/components/AddToCart.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/stefano.mezza/Downloads/e-commerce/frontend/components/AddToCart.js"],"names":["React","Component","cookie","MessageStyles","AddToCart","message","itemId","props","fetch","process","env","NEXT_PUBLIC_API_URL","method","headers","credentials","then","res","json","resData","setState","err","console","log","e","preventDefault","disabled","inStock","handleSubmit","load","addToCart","state"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,OAAOC,aAAP,MAA0B,oCAA1B;;IAEMC,S;;;;;;;;;;;;;;;;4DAEM;AAEJC,MAAAA,OAAO,EAAE;AAFL,K;;gEAMI,YAAM;AAEd,UAAMC,MAAM,GAAG,MAAKC,KAAL,CAAWD,MAA1B;AAEAE,MAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,mBAAhB,mCAA4DL,MAA5D,GAAsE;AAEvEM,QAAAA,MAAM,EAAE,OAF+D;AAIvEC,QAAAA,OAAO,EAAE;AAEL,oBAAU,kBAFL;AAGL,0BAAgB;AAHX,SAJ8D;AAWvEC,QAAAA,WAAW,EAAE;AAX0D,OAAtE,CAAL,CAeCC,IAfD,CAeM,UAAAC,GAAG,EAAI;AAET,eAAOA,GAAG,CAACC,IAAJ,EAAP;AAEH,OAnBD,EAqBCF,IArBD,CAqBM,UAAAG,OAAO,EAAI;AAEb,cAAKC,QAAL,CAAc;AAAEd,UAAAA,OAAO,EAAEa,OAAO,CAACb;AAAnB,SAAd;AAEH,OAzBD,WA2BO,UAAAe,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OA3BV;AA6BH,K;;mEAGc,UAAAG,CAAC,EAAI;AAEhBA,MAAAA,CAAC,CAACC,cAAF;AAEH,K;;;;;;;WAED,kBAAS;AAEL,UAAMC,QAAQ,GAAG,KAAKlB,KAAL,CAAWmB,OAAX,KAAuB,CAAxC;AAEA,0BAER,uDACY;AAAM,QAAA,QAAQ,EAAE,KAAKC,YAArB;AAAmC,QAAA,OAAO,EAAC;AAA3C,sBAGI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,IAAI,EAAC,QAA1B;AAAmC,QAAA,KAAK,EAAEzB,MAAM,CAAC0B,IAAP,CAAY,aAAZ;AAA1C,QAHJ,eAII;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,IAAI,EAAC,YAA1B;AAAuC,QAAA,KAAK,EAAE1B,MAAM,CAAC0B,IAAP,CAAY,OAAZ;AAA9C,QAJJ,eAKI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,IAAI,EAAC,YAA1B;AAAuC,QAAA,KAAK,EAAE1B,MAAM,CAAC0B,IAAP,CAAY,YAAZ;AAA9C,QALJ,eAOI;AAAQ,QAAA,QAAQ,EAAEH,QAAlB;AAA4B,QAAA,OAAO,EAAE,KAAKI;AAA1C,uBAPJ,EASK,KAAKC,KAAL,CAAWzB,OAAX,iBAEG,oBAAC,aAAD,qBAAe;AAAI,QAAA,SAAS,EAAE,KAAKyB,KAAL,CAAWzB,OAAX,4BAAwC,KAAKE,KAAL,CAAWmB,OAAnD,6BAC9B,KAAKI,KAAL,CAAWzB,OAAX,KAAuB,mDADO,GAE9B,KAF8B,GAEtB;AAFO,SAEF,KAAKyB,KAAL,CAAWzB,OAFT,CAAf,CAXR,CADZ,CAFQ;AAwBH;;;;;;;;;;;EA9EmBJ,S;;eAkFTG,S;AAAf;;;;;;;;;;0BAlFMA,S","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\n\nimport MessageStyles from '../components/styles/MessageStyles';\n\nclass AddToCart extends Component {\n\n    state = {\n\n        message: null,\n\n    }\n\n    addToCart = () => {\n\n        const itemId = this.props.itemId;\n\n        fetch(`${process.env.NEXT_PUBLIC_API_URL}/auth/api/add-to-cart/${itemId}`, {\n\n            method: 'PATCH',\n\n            headers: {\n\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n\n            credentials: 'include',\n\n        })\n\n        .then(res => {\n\n            return res.json();\n\n        })\n\n        .then(resData => {  \n\n            this.setState({ message: resData.message });\n\n        })\n\n        .catch(err => console.log(err));\n\n    }\n\n    // preventing page from refreshing so that we can tell the user how many items we have in stock (and also that they have to login if they haven't done it yet)\n    handleSubmit = e => {\n\n        e.preventDefault();\n\n    }\n\n    render() {\n\n        const disabled = this.props.inStock === 0;\n\n        return(\n\n<>\n            <form onSubmit={this.handleSubmit} encType=\"multipart/form-data\">\n\n                {/* checking presents of cookies (we also check on the backend the values) */}\n                <input type=\"hidden\" name=\"cookie\" value={cookie.load('connect.sid')} />\n                <input type=\"hidden\" name=\"XSRF-TOKEN\" value={cookie.load('token')} />\n                <input type=\"hidden\" name=\"authCookie\" value={cookie.load('authCookie')} />\n\n                <button disabled={disabled} onClick={this.addToCart}>Add To Cart</button>\n\n                {this.state.message && (\n\n                    <MessageStyles><h1 className={this.state.message === `we only have ${(this.props.inStock)} left into the store` ||\n                    this.state.message === 'you need to login in in order to take this action' ? \n                    'red' : ''}>{this.state.message}</h1></MessageStyles>\n\n                )}\n\n            </form>\n</>\n        )\n\n    }\n\n}\n\nexport default AddToCart;"]},"metadata":{},"sourceType":"module"}