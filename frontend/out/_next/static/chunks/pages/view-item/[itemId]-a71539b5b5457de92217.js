(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{5719:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var n=a(7294),r=a(1163),i=a(6610),s=a(5991),o=a(3349),l=a(5255),c=a(6089),d=a(7608),u=a(6156),m=a(1768),h=a(4397),g=a(1962),v=a(9226),f=a(410),p=a(9583),E=a(9163),w=E.ZP.div.withConfig({displayName:"ReviewStatsStyle",componentId:"upv92f-0"})(["box-shadow:0 2px 3rem rgba(0,0,0,0.30);margin:2rem;padding:1rem 0;text-transform:uppercase;#side-middle-margin-bottom{margin-bottom:2rem;}.heading{font-size:1.5rem;margin-right:.5rem;}.checked{color:orange;}#stars{margin-left:10px;}#total-reviews{margin-right:10px;}#user-rating{text-align:center;margin:1rem;}.side{float:left;width:15%;margin-top:10px;}.middle{float:left;width:70%;margin-top:10px;}.right{text-align:right;}.bar-container{width:100%;background-color:#f1f1f1;text-align:center;color:white;}.bar-5{height:18px;background-color:green;}.bar-4{height:18px;background-color:blue;}.bar-3{height:18px;background-color:lightblue;}.bar-2{height:18px;background-color:orange;}.bar-1{height:18px;background-color:red;}hr{border:2px solid gray;}@media only screen and (max-width:420px){.side,.middle{width:100%;}.right{text-align:left;margin-left:10px;margin-bottom:1rem;}textarea{width:10rem;}#side-middle-margin-bottom{margin-bottom:0;}}@media only screen and (min-width:300px) and (max-width:350px){.heading{font-size:1rem;}}@media only screen and (max-width:300px){.heading{font-size:.9rem;}span{font-size:.9rem;}}@media only screen and (min-width:420px) and (max-width:600px){.side,.middle{width:100%;}.right{text-align:left;margin-left:10px;margin-bottom:1rem;}textarea{width:25rem;}#side-middle-margin-bottom{margin-bottom:0;}}@media only screen and (min-width:600px) and (max-width:900px){textarea{width:35rem;}}"]),L=a(6574),y=E.ZP.div.withConfig({displayName:"ViewReviewStyle",componentId:"hrzhec-0"})(["box-shadow:0 2px 1rem green;width:60%;height:auto;word-wrap:break-word;margin:1rem auto;padding:1rem;"]);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var R=function(e){(0,l.Z)(a,e);var t=Z(a);function a(){var e;(0,i.Z)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,u.Z)((0,o.Z)(e),"state",{message:null}),(0,u.Z)((0,o.Z)(e),"fetchData",(function(){var t=e.props.reviewId;fetch("".concat("http://localhost:5000","/auth/api/remove-review/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.setState({message:t.message})})).then((function(){"review was removed"===e.state.message&&setTimeout((function(){window.location.replace("/view-item/".concat(e.props.itemId))}),1e3)})).catch((function(e){return console.log(e)}))})),e}return(0,s.Z)(a,[{key:"render",value:function(){return n.createElement("button",{className:"remove-review",onClick:this.fetchData,"aria-label":"remove review"},"X")}}]),a}(n.Component);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var b=function(e){(0,l.Z)(a,e);var t=x(a);function a(e){var r;return(0,i.Z)(this,a),r=t.call(this,e),(0,u.Z)((0,o.Z)(r),"fetchData",(function(){var e=r.props.itemId;fetch("".concat("http://localhost:5000","/api/view-review/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){r.setState({reviews:e.reviews.map((function(e){var t;return 5===e.rating&&(t=n.createElement(n.Fragment,null," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ")),4===e.rating&&(t=n.createElement(n.Fragment,null," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ")),3===e.rating&&(t=n.createElement(n.Fragment,null," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ")),2===e.rating&&(t=n.createElement(n.Fragment,null," ",n.createElement(p.QJe,null)," ",n.createElement(p.QJe,null)," ")),1===e.rating&&(t=n.createElement(n.Fragment,null," ",n.createElement(p.QJe,null)," ")),n.createElement(y,{key:e._id},n.createElement("span",{className:"orange"},t),r.props.userId===e.userId&&n.createElement(R,{itemId:r.props.itemId,reviewId:e._id}),n.createElement("h1",null,e.text))}))})})).catch((function(e){return console.log(e)}))})),r.state={reviews:[]},r.fetchData=r.fetchData.bind((0,o.Z)(r)),r}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return n.createElement("div",null,0===this.state.reviews.length&&n.createElement("h1",null,"there are no reviews for this item"),this.state.reviews.length>=1&&n.createElement("h1",null,"review",this.state.reviews.length>1?"s":""," of this item:"),this.state.reviews)}}]),a}(n.Component),k=E.ZP.div.withConfig({displayName:"WriteReviewStyle",componentId:"sc-1vldle8-0"})(["text-transform:uppercase;text-align:center;button{width:auto;background:green;color:white;border:0;font-size:2rem;font-weight:600;padding:0.5rem 1.2rem;margin:1rem;text-transform:uppercase;}.remove-review{background:red;color:white;border:0;font-size:.7rem;font-weight:600;padding:0.5rem 1.2rem;border-radius:4px;}textarea{margin:2rem auto;display:block;}button:hover{cursor:pointer;}.orange,.orange2{color:orange;}@media only screen and (max-width:600px){button{font-size:1.5rem;}h1{font-size:1.5rem;}}"]);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var D=function(e){(0,l.Z)(a,e);var t=I(a);function a(){var e;(0,i.Z)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,u.Z)((0,o.Z)(e),"state",{review:"",message:null,handleRatingValue:null}),(0,u.Z)((0,o.Z)(e),"handleChange",(function(t){e.setState({review:t.target.value})})),(0,u.Z)((0,o.Z)(e),"fetchData",(function(){var t=e.props.itemId;fetch("".concat("http://localhost:5000","/auth/api/write-review/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({review:e.state.review,star:e.state.handleRatingValue})}).then((function(e){return e.json()})).then((function(t){e.setState({message:t.message})})).catch((function(e){return console.log(e)}))})),(0,u.Z)((0,o.Z)(e),"handleRating",(function(){var e=document.getElementById("rating-5"),t=document.getElementById("rating-4"),a=document.getElementById("rating-3"),n=document.getElementById("rating-2"),r=document.getElementById("rating-1");e.addEventListener("mouseover",(function(i){e.classList.add("orange"),t.classList.add("orange"),a.classList.add("orange"),n.classList.add("orange"),r.classList.add("orange")})),t.addEventListener("mouseover",(function(e){t.classList.add("orange"),a.classList.add("orange"),n.classList.add("orange"),r.classList.add("orange")})),a.addEventListener("mouseover",(function(e){a.classList.add("orange"),n.classList.add("orange"),r.classList.add("orange")})),n.addEventListener("mouseover",(function(e){n.classList.add("orange"),r.classList.add("orange")})),r.addEventListener("mouseover",(function(e){r.classList.add("orange")})),e.addEventListener("mouseleave",(function(i){e.classList.remove("orange"),t.classList.remove("orange"),a.classList.remove("orange"),n.classList.remove("orange"),r.classList.remove("orange")})),t.addEventListener("mouseleave",(function(e){t.classList.remove("orange"),a.classList.remove("orange"),n.classList.remove("orange"),r.classList.remove("orange")})),a.addEventListener("mouseleave",(function(e){a.classList.remove("orange"),n.classList.remove("orange"),r.classList.remove("orange")})),n.addEventListener("mouseleave",(function(e){n.classList.remove("orange"),r.classList.remove("orange")})),r.addEventListener("mouseleave",(function(e){r.classList.remove("orange")})),e.addEventListener("click",(function(i){e.classList.add("orange2"),t.classList.add("orange2"),a.classList.add("orange2"),n.classList.add("orange2"),r.classList.add("orange2")})),t.addEventListener("click",(function(i){e.classList.remove("orange2"),t.classList.add("orange2"),a.classList.add("orange2"),n.classList.add("orange2"),r.classList.add("orange2")})),a.addEventListener("click",(function(i){e.classList.remove("orange2"),t.classList.remove("orange2"),a.classList.add("orange2"),n.classList.add("orange2"),r.classList.add("orange2")})),n.addEventListener("click",(function(i){e.classList.remove("orange2"),t.classList.remove("orange2"),a.classList.remove("orange2"),n.classList.add("orange2"),r.classList.add("orange2")})),r.addEventListener("click",(function(i){e.classList.remove("orange2"),t.classList.remove("orange2"),a.classList.remove("orange2"),n.classList.remove("orange2"),r.classList.add("orange2")}))})),(0,u.Z)((0,o.Z)(e),"handleRatingValue5",(function(){e.setState({handleRatingValue:5})})),(0,u.Z)((0,o.Z)(e),"handleRatingValue4",(function(){e.setState({handleRatingValue:4})})),(0,u.Z)((0,o.Z)(e),"handleRatingValue3",(function(){e.setState({handleRatingValue:3})})),(0,u.Z)((0,o.Z)(e),"handleRatingValue2",(function(){e.setState({handleRatingValue:2})})),(0,u.Z)((0,o.Z)(e),"handleRatingValue1",(function(){e.setState({handleRatingValue:1})})),e}return(0,s.Z)(a,[{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(k,null,n.createElement("h1",null,"write a review for this product!"),this.state.message&&n.createElement(L.Z,null,n.createElement("h1",{className:"you can only make 1 review per product"===this.state.message||"Only Users That Bought This Item Can Make A Review."===this.state.message||"You cannot take this action, please login"===this.state.message?"red":""},this.state.message)),n.createElement("span",{onClick:this.handleRatingValue1,onMouseOver:this.handleRating,id:"rating-1"},n.createElement(p.QJe,null)),n.createElement("span",{onClick:this.handleRatingValue2,onMouseOver:this.handleRating,id:"rating-2"},n.createElement(p.QJe,null)),n.createElement("span",{onClick:this.handleRatingValue3,onMouseOver:this.handleRating,id:"rating-3"},n.createElement(p.QJe,null)),n.createElement("span",{onClick:this.handleRatingValue4,onMouseOver:this.handleRating,id:"rating-4"},n.createElement(p.QJe,null)),n.createElement("span",{onClick:this.handleRatingValue5,onMouseOver:this.handleRating,id:"rating-5"},n.createElement(p.QJe,null)),n.createElement("input",{type:"hidden",name:"star",value:this.state.handleRatingValue}),n.createElement("textarea",{onChange:this.handleChange,value:this.state.review,name:"review",placeholder:"write a review for this product",cols:"100",rows:"15"}),n.createElement("button",{onClick:this.fetchData},"send review"),n.createElement("hr",null),n.createElement(b,{userId:this.props.userId,itemId:this.props.itemId})))}}]),a}(n.Component);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var S=function(e){(0,l.Z)(a,e);var t=C(a);function a(e){var n;return(0,i.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,o.Z)(n),"fetchData",(function(){var e=n.props.itemId;fetch("".concat("http://localhost:5000","/api/review-stats/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n.setState({totalReviews:e.totalReviews,averageReviews:e.averageReviews.toFixed(2),total5stars:e.total5starsLength,total4stars:e.total4starsLength,total3stars:e.total3starsLength,total2stars:e.total2starsLength,total1star:e.total1starLength})})).catch((function(e){return console.log(e)}))})),n.state={totalReviews:0,averageReviews:0,total5stars:0,total4stars:0,total3stars:0,total2stars:0,total1star:0},n.fetchData=n.fetchData.bind((0,o.Z)(n)),n}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state.total5stars/this.state.totalReviews*100,t=this.state.total4stars/this.state.totalReviews*100,a=this.state.total3stars/this.state.totalReviews*100,r=this.state.total2stars/this.state.totalReviews*100,i=this.state.total1star/this.state.totalReviews*100;return n.createElement(n.Fragment,null,n.createElement(w,null,n.createElement("div",{id:"user-rating"},n.createElement("span",{className:"heading"},"user rating"),n.createElement("span",{className:this.state.averageReviews>=1?"checked":""},n.createElement(p.QJe,null)),n.createElement("span",{className:this.state.averageReviews>=2?"checked":""},n.createElement(p.QJe,null)),n.createElement("span",{className:this.state.averageReviews>=3?"checked":""},n.createElement(p.QJe,null)),n.createElement("span",{className:this.state.averageReviews>=4?"checked":""},n.createElement(p.QJe,null)),n.createElement("span",{className:this.state.averageReviews>=5?"checked":""},n.createElement(p.QJe,null)),n.createElement("p",null,this.state.averageReviews," average based on ",this.state.totalReviews," review",this.state.totalReviews.length>1?"s":"")),n.createElement("hr",null),n.createElement("div",{class:"side"},n.createElement("div",{id:"stars"},"5 stars")),n.createElement("div",{class:"middle"},n.createElement("div",{class:"bar-container"},n.createElement("div",{style:0===this.state.total5stars?{width:"0%"}:{width:"".concat(e,"%")},class:"bar-5"}))),n.createElement("div",{class:"side right"},n.createElement("div",{id:"total-reviews"},this.state.total5stars)),n.createElement("div",{class:"side"},n.createElement("div",{id:"stars"},"4 stars")),n.createElement("div",{class:"middle"},n.createElement("div",{class:"bar-container"},n.createElement("div",{style:0===this.state.total4stars?{width:"0%"}:{width:"".concat(t,"%")},class:"bar-4"}))),n.createElement("div",{class:"side right"},n.createElement("div",{id:"total-reviews"},this.state.total4stars)),n.createElement("div",{class:"side"},n.createElement("div",{id:"stars"},"3 stars")),n.createElement("div",{class:"middle"},n.createElement("div",{class:"bar-container"},n.createElement("div",{style:0===this.state.total3stars?{width:"0%"}:{width:"".concat(a,"%")},class:"bar-3"}))),n.createElement("div",{class:"side right"},n.createElement("div",{id:"total-reviews"},this.state.total3stars)),n.createElement("div",{class:"side"},n.createElement("div",{id:"stars"},"2 stars")),n.createElement("div",{class:"middle"},n.createElement("div",{class:"bar-container"},n.createElement("div",{style:0===this.state.total2stars?{width:"0%"}:{width:"".concat(r,"%")},class:"bar-2"}))),n.createElement("div",{class:"side right"},n.createElement("div",{id:"total-reviews"},this.state.total2stars)),n.createElement("div",{id:"side-middle-margin-bottom",class:"side"},n.createElement("div",{id:"stars"},"1 star")),n.createElement("div",{id:"side-middle-margin-bottom",class:"middle"},n.createElement("div",{class:"bar-container"},n.createElement("div",{style:0===this.state.total1star?{width:"0%"}:{width:"".concat(i,"%")},class:"bar-1"}))),n.createElement("div",{id:"side-middle-margin-bottom",class:"side right"},n.createElement("div",{id:"total-reviews"},this.state.total1star)),n.createElement(D,{userId:this.props.userId,itemId:this.props.itemId})))}}]),a}(n.Component),J=a(2249),Q=E.ZP.div.withConfig({displayName:"ViewItemStyle",componentId:"rxazee-0"})(["max-width:50%;margin:1rem auto;@media only screen and (max-width:600px){max-width:100%;}@media only screen and (min-width:600px) and (max-width:1100px){max-width:80%;}"]);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var V=function(e){(0,l.Z)(a,e);var t=N(a);function a(e){var n;return(0,i.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,o.Z)(n),"fetchDataLoggedIn",(function(){var e=n.props.itemId;fetch("".concat("http://localhost:5000","/api/view-item-in/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){n.setState({loading:!1,title:e.title,price:e.price,description:e.description,image:e.image,inStock:e.stock,itemId:e.itemId,userId:e.userId})})).catch((function(e){return console.log(e)}))})),(0,u.Z)((0,o.Z)(n),"fetchDataLoggedOut",(function(){var e=n.props.itemId;fetch("".concat("http://localhost:5000","/api/view-item-out/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){n.setState({loading:!1,title:e.title,price:e.price,description:e.description,image:e.image,inStock:e.stock,itemId:e.itemId})})).catch((function(e){return console.log(e)}))})),n.state={loading:!0,title:"",description:"",image:"",price:void 0,inStock:void 0,itemId:void 0,userId:null},n.fetchDataLoggedIn=n.fetchDataLoggedIn.bind((0,o.Z)(n)),n.fetchDataLoggedOut=n.fetchDataLoggedOut.bind((0,o.Z)(n)),n}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){m.ZP.load("authCookie")&&this.fetchDataLoggedIn(),!m.ZP.load("authCookie")&&this.fetchDataLoggedOut()}},{key:"componentDidUpdate",value:function(){m.ZP.load("authCookie")&&this.fetchDataLoggedIn(),!m.ZP.load("authCookie")&&this.fetchDataLoggedOut()}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(h.Z,null),this.state.loading&&n.createElement(v.Z,null,"Loading..."),!this.state.loading&&n.createElement(n.Fragment,null,n.createElement(Q,null,n.createElement(g.Z,null,n.createElement("h1",null,"title"),n.createElement("p",null,this.state.title),n.createElement("img",{alt:this.state.title,src:this.state.image}),n.createElement("h1",null,"description"),n.createElement("p",null,this.state.description),n.createElement("h1",null,"price"),n.createElement("p",null,Number(this.state.price).toFixed(2)," \u20ac"),n.createElement(f.Z,{inStock:this.state.inStock,itemId:this.props.itemId}),this.state.inStock<=5&&this.state.inStock>0&&n.createElement("h1",{className:"few-left"},"only ",this.state.inStock," left!!!"),0===this.state.inStock&&n.createElement(J.Z,{itemId:this.state.itemId}))),n.createElement(S,{userId:this.state.userId,itemId:this.props.itemId})))}}]),a}(n.Component),j=function(){var e=(0,r.useRouter)();return n.createElement(V,{itemId:e.query.itemId})}},9073:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-item/[itemId]",function(){return a(5719)}])},1163:function(e,t,a){e.exports=a(2441)}},function(e){e.O(0,[445,15,231,456,888,774,179],(function(){return t=9073,e(e.s=t);var t}));var t=e.O();_N_E=t}]);